@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
}

@section Scripts {
    <script src="~/Scripts/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="~/Scripts/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="~/Scripts/jquery.maskedinput.js"></script>
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">
        $(document).ready(function () {
           
            atualizarProjeto();
            atualizarTarefa();
            atualizarHistorico();
           
            

        });
        
       
        google.load("visualization", "1", { packages: ["corechart"] });      
        google.setOnLoadCallback(drawChart);
      

        function setAguarde(dv) {
            $("#" + dv).html("<img src='/images/ajaxP.gif'/ alt=''>&nbsp;Aguarde...");
        }

        function atualizarProjeto() {
                    
                $.ajax(
                {
                    type: 'GET',
                    url: '/Dashbord/GridProjeto/',
                    dataType: 'html',
                    cache: false,
                   async: true,
                   success: function (data) {
                        $('#gridProjetos').html(data);
                    }
                });
        }

        function atualizarTarefa() {

            $.ajax(
            {
                type: 'GET',
                url: '/Dashbord/GridTarefa/',
                dataType: 'html',
                cache: false,
                async: true,
                success: function (data) {
                    $('#gridTarefas').html(data);
                }
            });
        }

        function atualizarHistorico() {

            $.ajax(
            {
                type: 'GET',
                url: '/Dashbord/GridHistorico/',
                dataType: 'html',
                cache: false,
                async: true,
                success: function (data) {
                    $('#gridHistoricos').html(data);
                }
            });
        }

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
              ['Status', 'Tarefas'],
              ['Ativa', 11],
              ['Finalizada', 2],
              ['Aguadando', 2],
              ['Cancelada', 2],
              ['Em Andamento', 7]
            ]);

            var options = {
                title: 'Status das Tarefas',
                is3D: 'true',
                backgroundColor: '#efeeef',
                fontSize: '14'
            };

            var chart = new google.visualization.PieChart(document.getElementById('grafico_status'));
            chart.draw(data, options);
        }

       
    </script>
}

<h1>Acompanhamento rápido</h1>

<div id="grafico_status" style="float:left; margin:40px 0px 0px 0px; width: 390px; height: 300px;"></div>
<div id="gridProjetos" style="float:left;  margin:15px;"></div>
<div id="gridHistoricos" style="float:left;  margin:15px;"></div>
<div id="gridTarefas" style="float:left;  margin:15px;" ></div>
  
 <table class="gridRow">
      <tr  class="gridFooter">
          <td><h3>Visualização de tarefas</h3></td>
          </tr>
     <tr>
        <td>
     <div id="chart_div" style="width: 900px; height: 200px;  margin:10px; float:left;"></div>
        </td>
     </tr>
  </table>